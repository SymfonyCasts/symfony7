Chapter 7. Symfony Environments. To make our Symfony application work differently we need a way to load different configuration and Symfony has an important concept called Environments. Symfony Environments is a set of configuration open `.env` file in the root of your project directory. It contains some environment variables and help us to avoid setting those directly in the system that simplify things while developing. Symfony application read that file and take those environment variables from there. So far we only have a few envars. You see this `APP_ENV` variable set to dev. This tells Symfony in which environment our application should be loaded. Right now we are in dev mode that helps while developing but after we deploy the website to production we will want to change this to prod that is optimized for performance and avoids sensitive data leaking. But what difference does it make if we change this `APP_ENV` from dev to prod? To answer this go open public index.php file. This is our front controller that is executed on every request and boots up Symfony application. It creates a `App\Kernel` instance which in turn has some methods. Let's open it in a new window. I will hold command and click on this class name. So this is an empty class but the most code is come from `MicroKernelTrait`. Let's open that one and in this trait you will find some methods for example this `configureContainer` method. This method imports configuration files and below we have this environment which if you dig a little bit is the value of our `APP_ENV` variable and so if you want an environment specific configuration you may put that in specific folder like `config/packages/{env}` like dev or prod and then the file name for example `framework.yaml` file but recently Symfony has a way cooler way for this so-called `when@test` syntax. You can see it all over the new configuration for example open `framework.yaml` file and at the end it has `when@test` that will be loaded only for test environment or for example `config/routes/web_profiler.yaml` file that also has different set of configuration per each environment for example this section will be loaded only for dev mode. This one for `test` mode and this one for `prod` and if you return back to `MicroKernelTrait` there is also a method called `configureRoutes` that is below and you can see the same is true for routes. Also different environment dirs are possible and also `when@test` syntax also works. For example, open `config/routes/framework.yaml`. We import this set of routes only for `dev` environment and `web_profiler` is the same. So Symfony app by default has three environments or modes `dev`, `prod` and also `test` to help with testing. You can create your own custom environment if needed but usually those three are more than enough on practice. Okay now open already familiar to us `config/bundles.php` file. It has an array of bundles enabled in our application and it's an array where the key is the bundle class and the value is an array of environments for which this bundle is activated. For example, this `web_profiler` bundle is only available for `dev` and `test` environments. For this `debug` bundle and `maker` bundle below they are only available in `dev` mode. They are super useful while developing but we definitely don't want those on production to leak some sensitive information. Okay next let's see if we can switch and load our application into `prod` environment.
