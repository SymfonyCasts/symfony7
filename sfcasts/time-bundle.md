# KnpTimeBundle: Install the Bundle, get its Service

So, on our Starshop website, customers have a convenient ship repair queue list. For this tutorial, I added a new `$arrivedAt` field to `Starship` Entity with some setters and getters methods. Now I want to print this field on the home page. If you already forgot about which controller responsible for this page, you can always hover over the first item in the Web Debug Toolbar and it suggests us the controller and action here. Let's open this main controller in phpStorm and find the home page action. It renders a template `homepage.html.twig`. Let's open it, find the ship repair queue and below, under the ship name, let's add a new deal. Inside I will write `arrivedAt` colon curly brackets and `ship.arrivedAt`. Now go back to the browser and refresh the homepage. Ah, an error. An exception has been thrown during the rendering a template. Object of class `DateTime` could not be converted to string. Yeah, that makes sense, PHP can't just print `DateTime` objects because don't know in which format you want to print it. But we can use a Twig filter to format it. Let's add Pipe and then `Date`. Now switch back to the browser and refresh again. Yes, this time we can see the date was rendered in a specific format. You can pass an optional `DateTime` format as the first argument to this `Date` filter, but if we skip it, the default format in the application will be used. Which one exactly? It's a good question, let's see it in the config. Open your terminal and run `binconsole config tmp twig`. Here you can see the date format configuration for your application. By the way, you can shorten this command like this instead of typing the full name which is `config dump-reference`. Make it as short as you want while there is still a unique name in your application. Otherwise, the console will ask you which command exactly you want to execute. Ok, back to the browser. Now the date is printed, but wouldn't it be cooler if we could say something like `2 hours ago` instead of this long date? Unfortunately, there is no service in our app that does this yet for us. And I certainly don't want to write it myself, I have got more fun things to do like playing board games, but maybe there is a bundle that gives us a service that can do this. And there is, it's called `KNP Time Bundle`, let's find it on GitHub. Here it is. Let's scroll it to the installation section and copy the `composer require` command. Open your terminal, paste and run. This installs the bundle and the required dependencies and also executes some recipes. Let's see what it brings us to our project. So every time we install a new bundle, it changes `composer.json` and `composer.log` files and also `symfony.log`, but also it changes `bundles.php`. Let's open it in our phpStorm. You can see the `KNP Time Bundle` was added to this array as the last item. And that's where Symfony activates this bundle for us in our application. Remember, bundles give us services, and this one is not an exception. But what services exactly? Well, we could read the docs to know more about it, but I will be lazy and just run... Open my terminal and run `winconsole debug-container-time`. And choose the `date-time formatter` for more information. Now let's run another command `winconsole debug-auto-wiring-time` to see if we can auto-wire it. And we can. That's the type hint you need to use to inject this service in your php classes, in case you want to use `ago` format in the php code. But since we want this only in Twig template, there is an easier solution. The bundles also come with a Twig integration that provides you some nice Twig filters and functions. Heck, you can even see this in `winconsole debug-colon-twig` and search for `ago`. Here is our new filter. By the way, this one, `date`, is also the one we used before. So let's now use `ago` filter, switch back to phpStorm, open the `template` and replace `date` with `ago`. Save it and open the browser, refresh the `homepage` and here it is. Now we have this nice "ago" format. So bundles give us services, and services are tools, and tools are fun.
