# Migrations

Now that we have our Starship entity, we need to get its table into the database.
There's a couple ways to do this, but the best way is to use what's called a _database
migration_. Migrations are like version control for your database. They store the
changes you make to your database schema in code.

Create our first migration in your terminal by running:

```terminal
symfony console make:migration
```

Success! Up here, we can see that it created a new file in the `migrations/`
directory: `Version`... a bunch of numbers... `.php`. Open this up and take a look.

This is a migration class generated by the Doctrine Migrations package. The "bunch
of numbers" in the class name is actually a timestamp - the current time. This is
important because when you have multiple migrations, you want to make sure they run
in the proper order: oldest to newest.

We have an `up()` method that is adding some SQL. This is the SQL that will build our
`starship` table! Look, we can see all our entity properties as table columns!

There's also a `down()` method. Migrations can be rolled back, so this method's
SQL _reverts_ what the `up()` method does. In this case, it drops the `starship`
table. Rolling back migrations is rare, we can ignore this for now.

One thing to note about the SQL in this file: it's in the format of the database
platform you're using. In our case, this is Postgres-specific SQL. If using SQLite,
you'd see SQLite-specific SQL.

It's good practice to describe what each migration does. In `getDescription()`:
`return 'Add starship table'`.

Let's pop over to our terminal and take a look at the status of our migration:

```terminal
symfony console doctrine:migrations:list
```

The output's a little wonky but we can see our migration class and it's description.
The status is `not migrated` because we haven't run it yet. So, let's run it!

```terminal
symfony console doctrine:migrations:migrate
```

Are we sure we want to continue? Yes! Success! Our migration was run. Let's check
the status now:

```terminal
symfony console doctrine:migrations:list
```

Check this out! The status is now `migrated`, we can see _when_ it was migrated and
how long it took.

But how does Doctrine track which migrations have been run? It creates a
`doctrine_migration_versions` table in your database to keep track of this. Let's
take a look at it. Run:

```terminal
symfony console doctrine:query:sql 'select * from doctrine_migration_versions'
```

The `doctrine:query:sql` command allows running _raw_ SQL queries on your database.
In this case, we're selecting all rows from the `doctrine_migration_versions` table.

Look at that! There's our migration class, when it was executed, and how long it took.
Just like what we saw with the `doctrine:migrations:list` command.

Now, is our `starship` table in the database? Let's run another raw SQL query to find out!

```terminal
symfony console doctrine:query:sql 'select * from starship'
```

> The query yielded an empty result set.

Green means good, right? Yup! This is telling us there's no data in the `starship` table.
But it means the table _exists_! It would have yelled at us otherwise.

Our database is _still_ missing the most important part: data! Next: we'll use
fixtures to add some!
