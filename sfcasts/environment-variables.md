Chapter 13. Environment Variables Let's talk more about environment variables. The key about environment variables are that they are configs that need to be different on different Symfony environments, like Dev vs Prod. The most common example is the database connection information. You can set real envars in your OS, and while many cloud hosting platforms do make it super easy to set environment variables, it's not very simple to do locally on your computer. That's why Symfony also has this `.env` file that simplifies our life a lot, especially during the development. Here is the plan. I want our `ISS_LOCATION_CACHE_TTL` value be different locally and on production. For production, I want to make the cache to last longer, instead of 5 seconds refresh every minute. To make this possible, the easiest solution would be to create a custom environment variable and set it to different value for Dev and for Prod. Open back `.env` file and below I'll call it `ISS_LOCATION_CACHE_TTL`, all uppercase, that's a standard for environment variables. And let's set it to 5 by default. Now go back to `services.yaml` and basically we will keep the `ISS_LOCATION_CACHE_TTL` parameter but set it to the environment variable we just created. For this we will leverage a special syntax. Open single quotes and type `%env` and PhpStorm's Symfony plugin will auto-complete it. So I choose our `ISS_LOCATION_CACHE_TTL` envar here. To debug it, let's open the `homepage()` action and inside, right in the beginning, let's set `dd` as `this.getParameter` and write our `ISS_LOCATION_CACHE_TTL` parameter. Open the browser and refresh. Here is our value number 5. But it's subtle, however, you might notice that value has a string type now. All environment variables are just simple strings by default, but Symfony has a way to typecast them to a different type. It's so-called environment variable processors and the one may help us to typecast it to integer. Back to PhpStorm `services.yaml` and before the environment variable let's add `int:`. Back to the browser, refresh and now we have a real integer 5. So as soon as we deploy this project to production, we will just need to set up this `ISS_LOCATION_CACHE_TTL` variable to 60 and it will cache the data for 1 minute. I also want to talk about other files, other `.env` files. This . `.env` file is committed to git, as you can see when I change it the changes are unstaged. So if you have some secrets that you don't want to commit into your git repository you can create a different file `.env.local`. This one is completely git ignored, you can see it in `.gitignore` and you can write your secrets here and they will not be committed to the repository. For example, this `app_secret` environment variable, we can just move this to `.env.local` file and inside `.env` file keep it empty or set it to some fake value, but it's a good practice to still have the environment variable in the `.env` file, but use real secrets in the `.env.local` one. But I'm fine to keep this secret in my `.env` file committed, so I will revert it. There is also a handy command, oh wait, so along with these two files there are also less common `.env.test` and `.env.prod` files that you can use, those are loaded only in dev and prod Symfony environment correspondingly. There is also a handy command to debug environment variables, you can run in your console the next command `binconsole debug.env`. This can help you to determine the order in which those files were loaded or scanned and it also lists all the environment variables it found in those files, so far we have only three of them and we can see their values, their actual values and in which files exactly those values are set. But if you really want to secure your sensitive values, Symfony has a special tool for this called Secrets Vault. You can google for Symfony secrets and the top results will be how to keep sensitive information secret that leads to Symfony documentation. This is a way to have environment variables that you can commit to your repository, safely commit to your git repository because they are encrypted and can be read without decrypting. If you really need this, read the docs or you can search some related videos we have on Symfony casts. Next let's talk more about the auto-configuration, but before I will go and revert the changes from a home page, just remove this `dd`, we don't need it anymore.
