Chapter 8. The Prod Environment Let's open the `.env` file in the root of our project and change this dev value to prod for the `APP_ENV=prod` environment variable. Did it work? Let's refresh the home page to see if we can spot any changes. And yes, the web debug toolbar below is completely gone now. Now let's try to change something in a template. Open the home page html tweak in the templates main folder and below change the `.env` file to `.html`. For example, this time to `Updated at`. That will be more descriptive, I think. So now head back and refresh. But nothing changed. For performance reasons, templates are cached and are not recompiled after change. So we need to clear the cache manually. In terminal let's run `bin console` and run `cache:clear`. Actually, you can explicitly specify environment for any command with `--env` option. For example, set it to prod if you want to clear the prod cache. Or if you want to run the command in prod mode. It may be useful when you need to run a command in a specific environment that is different to the one from `APP_ENV=prod`. But since we already set that environment to prod explicitly in the `.env` file, so this is redundant in this case. So I will just run `bin console cache:clear`. As you can see, the prod environment cache was cleared successfully. Okay, now refresh the page again. And here is our `Updated at` phrase. You need to remember to clear the cache manually when you are changing something in prod mode, like templates, config files, etc. Right now we are using `cache.adapter.array`, which is kinda fake cache. You can see it in `config.packages.cache.yaml` file. But in prod mode we want to use `cache.adapter.filesystem`, for example, instead of this one. `cache.adapter.array` is mostly useful during the development. So now when we know about that `when@dev` syntax, let's leverage it. Below I will write `when@dev` and we need to write it for prod environment colon. And next we need to repeat the whole structure of framework, cache, app. And I will write here `cache.adapter.file`.
 Okay, to see it in action, we remember that we need to clear the cache again, because we are currently in the `APP_ENV=prod` mode. Okay, now let's run the `bin/console cache:clear` command again. Let's compare the page to notice that the data were cached for at least 5 seconds. Instant load. After 5 seconds we see some delay. So now in `.env` file we can change our `APP_ENV` variable back to `dev`. And you can switch back to the browser and see that every time we refresh we see this HTTP request. Okay, next let's learn more about services and their configuration.
